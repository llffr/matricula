CREATE TABLE alumnos (
    id_alumno INTEGER PRIMARY KEY AUTOINCREMENT,
    nombre TEXT NOT NULL,
    apellido TEXT NOT NULL,
    passwd TEXT NOT NULL,
    email TEXT UNIQUE
);

CREATE TABLE profesores (
    id_profesor INTEGER PRIMARY KEY AUTOINCREMENT,
    nombre TEXT NOT NULL,
    apellido TEXT NOT NULL,
    email TEXT UNIQUE
);

CREATE TABLE cursos (
    id_curso INTEGER PRIMARY KEY AUTOINCREMENT,
    nombre TEXT NOT NULL,
    hours integer NOT NULL,
    creditos INTEGER,
    id_profesor INTEGER,
    FOREIGN KEY (id_profesor) REFERENCES profesores(id_profesor)
);

CREATE TABLE matriculas (
    id_matricula INTEGER PRIMARY KEY AUTOINCREMENT,
    id_alumno INTEGER NOT NULL,
    id_curso INTEGER NOT NULL,
    anio INTEGER NOT NULL,
    semestre TEXT CHECK(semestre IN ('1', '2')) NOT NULL,
    fecha_matricula DATE DEFAULT (date('now')),
    FOREIGN KEY (id_alumno) REFERENCES alumnos(id_alumno),
    FOREIGN KEY (id_curso) REFERENCES cursos(id_curso),
    UNIQUE (id_alumno, id_curso, anio, semestre) -- evita duplicados
);

INSERT INTO alumnos (nombre, apellido, passwd, email)
VALUES ('Juan', 'Pérez', '12345678A', 'juan.perez@email.com');

INSERT INTO profesores (nombre, apellido, email) values
('A', 'A', 'A@utp.edu.pe'),
('B', 'B', 'B@utp.edu.pe'),
('C', 'C', 'C@utp.edu.pe'),
('D', 'D', 'D@utp.edu.pe'),
('E', 'E', 'E@utp.edu.pe');

INSERT INTO cursos (nombre, hours, creditos, id_profesor) values
('Matemáticas 1', '2', 2, 1),
('Matemáticas 2', '2', 2, 1),
('Matemáticas 3', '4', 6, 2),
('Matemáticas 4', '6', 6, 3);
